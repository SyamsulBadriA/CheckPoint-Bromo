<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>Home</title>
    <link rel="stylesheet" href="nicepage.css" media="screen">
    <link rel="stylesheet" href="Home.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery-1.9.1.min.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 6.13.10, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "Organization",
        "name": "Result Bromotengger",
        "url": "/"
    }</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="Home">
    <meta property="og:description" content="">
    <meta property="og:type" content="website">
    <link rel="canonical" href="/">
    <meta data-intl-tel-input-cdn-path="intlTelInput/">
    <style>
        /* Custom styles for tab links */
        .u-tab-link {
            background-color: #12cff0; /* Blue color for inactive tabs */
            color: #fff; /* White text color for inactive tabs */
            padding: 10px 20px; /* Add padding for better appearance */
            text-decoration: none; /* Remove underline */
        }

        .u-tab-link.active {
            background-color: #000; /* Color for active tab */
            color: #fff; /* Text color for active tab */
        }

        .u-tab-link:hover {
            background-color: #004e72; /* Darker blue color on hover */
        }
    </style>
</head>
<body data-path-to-root="./" data-include-products="false" class="u-body u-xl-mode" data-lang="en">
    <section class="u-clearfix u-image u-section-1" id="sec-93c9" data-image-width="728" data-image-height="455">
        <div class="u-clearfix u-sheet u-valign-middle-lg u-valign-middle-md u-valign-middle-sm u-sheet-1">
            <img class="u-align-center u-image u-image-contain u-image-default u-image-1" src="images/LOGO.png" alt="" data-image-width="1866" data-image-height="1305">
        </div>
    </section>
    <section class="u-align-center u-clearfix u-section-2" id="sec-18f8">
        <div class="u-expanded-width u-tab-links-align-center u-tabs u-tabs-1">
            <ul class="u-border-2 u-border-palette-1-base u-spacing-0 u-tab-list u-unstyled" role="tablist">
                <li class="u-tab-item" role="presentation">
                    <a class="u-tab-link" id="link-tab-0da5" href="#tab-0da5" role="tab" aria-controls="tab-0da5" aria-selected="false">11 KM</a>
                </li>
                <li class="u-tab-item" role="presentation">
                    <a class="u-tab-link" id="link-tab-fab0" href="#tab-fab0" role="tab" aria-controls="tab-fab0" aria-selected="false">21KM</a>
                </li>
            </ul>
            <div class="u-tab-content">
                <div class="u-container-style u-tab-pane" id="tab-0da5" role="tabpanel" aria-labelledby="link-tab-0da5">
                    <div class="u-container-layout u-valign-top u-container-layout-1">
                        <div class="custom-expanded u-align-center u-table u-table-responsive u-table-1">
                            <table class="u-table-entity" id="table11">
                                <colgroup>
                                    <col width="7%">
                                    <col width="30.6%">
                                    <col width="2%">
                                    <col width="15.7%">
                                    <col width="16%">
                                    <col width="13.999999999999986%">
                                    <col width="14.699999999999985%">
                                </colgroup>
                                <tbody class="u-table-alt-grey-5 u-table-body u-table-body-1">
                                    <tr style="height: 38px;">
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-1">BIB</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-2">Name</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-3">Gender</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-4">WS 1</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-7">Amount of Time</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-5">Finish </td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-6">Rank</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-7">Status</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="u-container-style u-tab-pane" id="tab-fab0" role="tabpanel" aria-labelledby="link-tab-fab0">
                    <div class="u-container-layout u-valign-top u-container-layout-2">
                        <div class="custom-expanded u-align-center u-table u-table-responsive u-table-2">
                            <table class="u-table-entity" id="table21">
                                <colgroup>
                                    <col width="5.4%">
                                    <col width="15.9%">
                                    <col width="9.3%">
                                    <col width="12.2%">
                                    <col width="11.1%">
                                    <col width="11.5%">
                                    <col width="12.4%">
                                    <col width="10.9%">
                                    <col width="11.299999999999986%">
                                </colgroup>
                                <tbody class="u-table-alt-grey-5 u-table-body u-table-body-2">
                                    <tr style="height: 25px;">
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-36">BIB</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-37">Name</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-38">Gender</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-39">WS 1</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-40">WS 2</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-41">WS 3</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-44">Amount of Time</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-42">Finish </td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-43">Rank</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell u-table-cell-44">Status</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-9523">
        <div class="u-clearfix u-sheet u-sheet-1">
            <p class="u-align-center-lg u-align-center-md u-align-center-sm u-align-center-xs u-text u-text-default-lg u-text-default-md u-text-default-sm u-text-default-xs u-text-1"> Â© All rights reserved</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Tab functionality
            const tabs = document.querySelectorAll('.u-tab-link');
            const tabPanes = document.querySelectorAll('.u-tab-pane');

            // Load the last selected tab from localStorage
            const savedTab = localStorage.getItem('selectedTab') || 'tab-fab0';

            tabPanes.forEach(pane => {
                pane.classList.remove('u-tab-active');
                pane.style.display = 'none';
            });

            const activeTab = document.querySelector(`[href="#${savedTab}"]`);
            const activePane = document.getElementById(savedTab);

            if (activeTab && activePane) {
                activeTab.classList.add('active');
                activeTab.classList.add('u-active-black');
                activeTab.classList.remove('u-text-black');
                activeTab.classList.remove('u-text-active-white');
                activeTab.setAttribute('aria-selected', 'true');
                activePane.classList.add('u-tab-active');
                activePane.style.display = 'block';
            }

            // Add event listeners to tabs
            tabs.forEach(tab => {
                tab.addEventListener('click', function (event) {
                    event.preventDefault();
                    const targetPane = document.querySelector(this.getAttribute('href'));

                    tabs.forEach(t => {
                        t.classList.remove('active');
                        t.classList.remove('u-active-black');
                        t.classList.add('u-text-black');
                        t.classList.add('u-text-active-white');
                        t.setAttribute('aria-selected', 'false');
                    });

                    tabPanes.forEach(pane => {
                        pane.classList.remove('u-tab-active');
                        pane.style.display = 'none';
                    });

                    this.classList.add('active');
                    this.classList.add('u-active-black');
                    this.classList.remove('u-text-black');
                    this.classList.remove('u-text-active-white');
                    this.setAttribute('aria-selected', 'true');
                    targetPane.classList.add('u-tab-active');
                    targetPane.style.display = 'block';

                    // Save selected tab in localStorage
                    localStorage.setItem('selectedTab', targetPane.id);
                });
            });

            // Fetch and display data
            fetch('https://detrac.id/checkoutcaldera/tbl_bib_brm.php')
                .then(response => response.json())
                .then(data => {
                    const table11 = document.getElementById('table11').getElementsByTagName('tbody')[0];
                    const table21 = document.getElementById('table21').getElementsByTagName('tbody')[0];

                    // Function to format date strings
                    const formatTime = (dateString) => {
                        if (!dateString) return '';
                        const date = new Date(dateString);
                        return date.toTimeString().split(' ')[0];
                    };

                    // Function to convert number to ordinal
                    const ordinalSuffix = (num) => {
                        if (num == null || num === 'null') return '1st'; // Handle null or undefined rank values
                        num = parseInt(num, 10); // Ensure it's an integer
                        if (isNaN(num)) return 'N/A'; // Handle cases where num is not a number

                        let suffix = 'th';
                        if (num % 10 === 1 && num % 100 !== 11) {
                            suffix = 'st';
                        } else if (num % 10 === 2 && num % 100 !== 12) {
                            suffix = 'nd';
                        } else if (num % 10 === 3 && num % 100 !== 13) {
                            suffix = 'rd';
                        }
                        return num + suffix;
                    };

                    // Group items by category
                    const categories = {
                        '11_km': [],
                        '21_km': []
                    };

                    data.forEach(item => {
                        if (categories[item.category]) {
                            categories[item.category].push(item);
                        }
                    });

                    // Function to create rows for a specific category
                    const createRows = (items, table) => {
                        items.forEach((item, index) => {
                            let row;
                            if (item.category === '11_km') {
                                row = `
                                    <tr style="height: 38px;">
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${item.no_bib}</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${item.name}</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${item.gender}</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${formatTime(item.ws_1_1)}</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${item.AOT1 ? item.AOT1 : ''}</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${formatTime(item.finish_1)}</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${ordinalSuffix(index + 1)}</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${item.status}</td>
                                    </tr>
                                `;
                                table11.innerHTML += row;
                            } else if (item.category === '21_km') {
                                row = `
                                    <tr style="height: 25px;">
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${item.no_bib}</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${item.name}</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${item.gender}</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${formatTime(item.ws_1)}</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${formatTime(item.ws_2)}</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${formatTime(item.ws_3)}</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${item.AOT ? item.AOT : ''}</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${formatTime(item.finish)}</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${ordinalSuffix(index + 1)}</td>
                                        <td class="u-border-1 u-border-grey-dark-1 u-table-cell">${item.status}</td>
                                    </tr>
                                `;
                                table21.innerHTML += row;
                            }
                        });
                    };

                    // Create rows for each category
                    createRows(categories['11_km'], table11);
                    createRows(categories['21_km'], table21);
                })
                .catch(error => console.error('Error fetching data:', error));

            // Auto-refresh every 5 seconds
            setTimeout(function() {
                location.reload();
            }, 30000);
        });
    </script>
</body>
</html>
